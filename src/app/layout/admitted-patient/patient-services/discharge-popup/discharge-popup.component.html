<ng-template #dischargepopup>
  <div class="site-panel-register p-3 ">
    <div class="site-register-wrapper">
      <form [formGroup]="dischargePatient">
        <div class="form-group-wrapper form-group-main-div">
          <div class="form-group-main">
            <div class="dashboard-panel-header d-flex align-content-center justify-content-between mb-3">
              <h2 class="m-0 text-white d-flex align-items-center">
                Discharge Patient </h2>
              <div class="position-relative w-30"></div>
            </div>
            <div class="addmission-main-wrapper">
              <div class="form-title">
                <h2 class="pl-border-radius-0 bg-sky-blue">Admission
                  Data</h2>
              </div>
              <div class="h-100 addmission-wrap py-3">
                <div class="container-fluid">
                  <div class="row mb-3">
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <input type="text" class="form-control" placeholder="MRN" formControlName="mrn" readonly>
                        <label class="position-absolute m-0 bg-white">MRN</label>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <input type="text" name id class="f-size-field form-control" placeholder="Patient Name" formControlName="patientName"
                          readonly />
                        <label class="position-absolute m-0 bg-white">Patient
                          Name</label>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <input type="text" name id class="f-size-field form-control" placeholder="Visit ID" formControlName="visitId" readonly />
                        <label class="position-absolute m-0 bg-white">Visit
                          ID</label>
                      </div>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <input type="text" class="form-control" placeholder="Admitted On" formControlName="admittedOn"  [bsConfig]="{showWeekNumbers: false, dateInputFormat:'DD-MM-YYYY'}"
                        bsDatepicker readonly>
                        <label class="position-absolute m-0 bg-white">Admitted On</label>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <input type="text" name id class="f-size-field form-control" formControlName="admittedAt"  [bsConfig]="{showWeekNumbers: false,withTimepicker:true, dateInputFormat:'HH:mm:ss'}"
                        bsDatepicker placeholder="Admitted At"
                          readonly />
                        <label class="position-absolute m-0 bg-white">Admitted
                          At</label>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <ng-select placeholder="Floor"
                        class="border-0 font-numbar lab-select"
                        formControlName="floorId"
                        (change)="getSelectgetRooms($event);" [readonly]="true">
                        <ng-option
                            *ngFor="let item of getFloorslist"
                            [value]="item.id">{{item.floornumber+"-"+item.floorName}}</ng-option>
                    </ng-select>
                        <label class="position-absolute m-0 bg-white">Floor</label>
                      </div>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <ng-select placeholder="Room"
                        class="border-0 font-numbar lab-select"
                        formControlName="roomId"
                        (change)="getSelectgetBads($event)" [readonly]="true">
                        <ng-option
                            *ngFor="let item of getRoomslist"
                            [value]="item.id">{{item.roomNumber+"-"+item.roomName}}</ng-option>
                    </ng-select>
                        <label class="position-absolute m-0 bg-white">Room</label>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <ng-select placeholder="Bed"
                        class="border-0 font-numbar lab-select"
                        formControlName="badId" [readonly]="true">
                        <ng-option
                            *ngFor="let item of getBadlist"
                            [value]="item.id">{{item.badNumber+"-"+item.badName}}</ng-option>
                    </ng-select>
                        <label class="position-absolute m-0 bg-white">Bed</label>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <ng-select placeholder="Attending Physician"
                        class="border-0 font-numbar lab-select" formControlName="attendDoctor_code" [readonly]="true">
                        <ng-option
                        *ngFor="let item of getPhysicianlist"
                            [value]="item.doctor_Code" >{{item.doctor_Name}}</ng-option>
                     </ng-select>
                        <label class="position-absolute m-0 bg-white">Attending Physician</label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="addmission-main-wrapper">
              <div class="form-title">
                <h2 class="pl-border-radius-0 bg-sky-blue">Discharge
                  Data</h2>
              </div>
              <div class="h-100 addmission-wrap py-3">
                <div class="container-fluid">
                  <div class="row mb-3">
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <input type="text" class="form-control" placeholder="Discharge Date" formControlName="dischargeDate"
                        [bsConfig]="{showWeekNumbers: false, dateInputFormat:'DD-MM-YYYY'}" bsDatepicker
                        [ngClass]="dischargePatient.get('dischargeDate').invalid && dischargePatient.get('dischargeDate').touched ? 'error' : ''">
                        <label class="position-absolute m-0 bg-white">Discharge Date</label>
                        <ng-container *ngIf="dischargePatient.get('dischargeDate').invalid && dischargePatient.get('dischargeDate').touched">
                          <span class="error-message" *ngIf="dischargePatient.get('dischargeDate').errors.required">
                            Discharge Date is required
                          </span>
                        </ng-container>
                        <ng-container *ngIf="dischargePatient.get('dischargeDate').hasError('pastDate')">
                          <span class="error-message"> Cannot select a past date</span>
                         </ng-container>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <input type="text" name id class="f-size-field form-control" placeholder="Discharge Time"  formControlName="dischargeTime" placement="top" [isDisabled]="true"
                        [bsConfig]="{showWeekNumbers: false, withTimepicker:true ,dateInputFormat:'HH:mm:ss'}" bsDatepicker
                        [ngClass]="dischargePatient.get('dischargeTime').invalid && dischargePatient.get('dischargeTime').touched ? 'error' : ''"/>
                        <label class="position-absolute m-0 bg-white">Discharge Time</label>
                        <ng-container *ngIf="dischargePatient.get('dischargeTime').invalid && dischargePatient.get('dischargeTime').touched">
                          <span class="error-message" *ngIf="dischargePatient.get('dischargeTime').errors.required">
                            Discharge Time is required
                          </span>
                        </ng-container>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">                     
                        <ng-select placeholder="Discharge Type" class="border-0 font-numbar lab-select" formControlName="dischargeTypesId">
                          <ng-option *ngFor="let item of getDischargeTypeData" [value]="item.id">{{item.status}}</ng-option>
                        </ng-select>
                        <label class="position-absolute m-0 bg-white">Discharge Type</label>
                        <ng-container *ngIf="dischargePatient.get('dischargeTypesId').invalid && dischargePatient.get('dischargeTypesId').touched">
                          <span class="error-message" *ngIf="dischargePatient.get('dischargeTypesId').errors.required">
                            Discharge type is required
                          </span>
                        </ng-container>
                      </div>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <!-- <input type="text" class="form-control" placeholder="Discharge Status" > -->
                        <ng-select placeholder="Discharge Status" class="border-0 font-numbar lab-select" formControlName="dischargeStatusId">
                          <ng-option *ngFor="let item of dischargeStatusList" [value]="item.id">{{item.status}}</ng-option>
                        </ng-select>
                        <label class="position-absolute m-0 bg-white">Discharge
                          Status</label>
                          <ng-container *ngIf="dischargePatient.get('dischargeStatusId').invalid && dischargePatient.get('dischargeStatusId').touched">
                            <span class="error-message" *ngIf="dischargePatient.get('dischargeStatusId').errors.required">
                              Discharge status is required
                            </span>
                          </ng-container>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <ng-select placeholder="Discharge Physician"
                        class="border-0 font-numbar lab-select" formControlName="dischargeDoctor_code">
                        <ng-option
                        *ngFor="let item of getDischargePysicianList"
                            [value]="item.doctor_Code" >{{item.doctor_Name}}</ng-option>
                     </ng-select>
                        <label class="position-absolute m-0 bg-white">Discharge Physician</label>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group-control m-0 px-0 position-relative col-12">
                        <input type="text" name id class="f-size-field form-control" placeholder="Discharge Reason" formControlName="dischargeReason"
                           />
                        <label class="position-absolute m-0 bg-white">Discharge Reason</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="action-buttons d-flex align-items-center justify-content-center my-3">
                  <div class="button-group mx-2">
                    <button type="submit"
                      class="d-flex align-items-center pl-border-radius-10 text-white p-2 px-3 text-nowrap default-btn" (click)="onSave()">Save</button>
                  </div>
                  <div class="button-group mx-2">
                    <button
                      class="d-flex align-items-center pl-border-radius-10 text-white p-2 px-3 text-nowrap cancel-btn" (click)="onCancel()">Cancel</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</ng-template>
