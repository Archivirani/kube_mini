<ng-template #transferpatientPopup>
    <div class="site-panel-register p-3">
        <div class="site-register-wrapper">
            <form [formGroup]="transferForm">
                <div class="form-group-wrapper form-group-main-div">
                    <div class="form-group-main">
                        <div
                            class="dashboard-panel-header d-flex align-content-center justify-content-between mb-3">
                            <h2
                                class="m-0 text-white d-flex align-items-center">
                                Transfer Patient </h2>
                                <div
                                class="position-relative w-30"></div>
                        </div>
                        <div class="addmission-main-wrapper">
                            <div class="form-title">
                                <h2
                                    class="pl-border-radius-0 bg-sky-blue">Admission
                                    Data</h2>
                            </div>
                            <div
                                class="h-100 addmission-wrap py-3">
                                <div class="container-fluid">
                                    <div class="row mb-3">
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                <input type="text"
                                                    class="form-control"
                                                    placeholder="MRN"
                                                    readonly formControlName="mrn">
                                                <label
                                                    class="position-absolute m-0 bg-white">MRN</label>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                <input type="text" name id
                                                    class="f-size-field form-control"
                                                    placeholder="Patient Name"
                                                    readonly formControlName="patientName"/>
                                                <label
                                                    class="position-absolute m-0 bg-white">Patient
                                                    Name</label>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                <input type="text" name id
                                                    class="f-size-field form-control"
                                                    placeholder="Visit ID"
                                                    readonly formControlName="visitId"/>
                                                <label
                                                    class="position-absolute m-0 bg-white">Visit
                                                    ID</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                <input type="text"
                                                    class="form-control"
                                                    placeholder="Case Type"
                                                    readonly formControlName="caseTypeId">
                                                <label
                                                    class="position-absolute m-0 bg-white">Case
                                                    Type</label>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                <input type="text" name id
                                                    class="f-size-field form-control"
                                                    [bsConfig]="{showWeekNumbers: false, dateInputFormat:'DD-MM-YYYY'}"
                                                    bsDatepicker
                                                    placeholder="Admitted On"
                                                    readonly formControlName="admDate"/>
                                                <label
                                                    class="position-absolute m-0 bg-white">Admitted
                                                    On</label>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                <input type="text" name id
                                                    class="f-size-field form-control"
                                                    [bsConfig]="{showWeekNumbers: false,withTimepicker:true, dateInputFormat:'HH:mm:ss'}"
                                                    bsDatepicker
                                                    placeholder="Admitted A+"
                                                    readonly formControlName="admTime"/>
                                                <label
                                                    class="position-absolute m-0 bg-white">Admitted
                                                    A+</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="addmission-main-wrapper">
                            <div class="form-title">
                                <h2
                                    class="pl-border-radius-0 bg-sky-blue">Transfer
                                    Data</h2>
                            </div>
                            <div
                                class="h-100 addmission-wrap py-3">
                                <div class="container-fluid">
                                    <div class="row mb-3">
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                <input type="text"
                                                    class="form-control"
                                                    placeholder="Date"
                                                    [bsConfig]="{showWeekNumbers: false, dateInputFormat:'DD-MM-YYYY'}"
                                                    bsDatepicker
                                                    formControlName="transferDate">
                                                <label
                                                    class="position-absolute m-0 bg-white">Date</label>
                                                    <ng-container *ngIf="transferForm.get('transferDate').hasError('pastDate')">
                                                     <span class="error-message"> Cannot select a past date</span>
                                                    </ng-container>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                <input type="text" name id
                                                class="f-size-field form-control"
                                                    [isDisabled]="true"
                                                    [bsConfig]="{showWeekNumbers: false, withTimepicker:true ,dateInputFormat:'HH:mm:ss'}" bsDatepicker
                                                    placeholder="Time"
                                                    formControlName="transferTime" />
                                                <label
                                                    class="position-absolute m-0 bg-white">Time</label>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12 ">
                                                <ng-select
                                                    placeholder="Transfer Type"
                                                    class="border-0 font-numbar lab-select" formControlName="transferTypeId">
                                                    <ng-option *ngFor="let item of transferTypeList" [value]="item.id">{{item.status}}</ng-option>
                                                </ng-select>
                                                <label
                                                class="position-absolute m-0 bg-white">Transfer
                                                Type</label>
                                                <ng-container
                                                *ngIf="transferForm.get('transferTypeId').invalid && transferForm.get('transferTypeId').touched">
                                                <span class="error-message"
                                                  *ngIf="transferForm.get('transferTypeId').errors.required">
                                                   Transfer Type is required
                                                </span>
                                              </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                    <ng-select
                                                    placeholder="Transfer status"  [readonly]="true"
                                                    class="border-0 font-numbar lab-select" formControlName="transferStatusId">
                                                    <ng-option *ngFor="let item of transferStatusList" [value]="item.id">{{item.status}}</ng-option>
                                                </ng-select>
                                                <label
                                                    class="position-absolute m-0 bg-white">Transfer
                                                    Status</label>
                                                <ng-container
                                                *ngIf="transferForm.get('transferStatusId').invalid && transferForm.get('transferStatusId').touched">
                                                <span class="error-message"
                                                  *ngIf="transferForm.get('transferStatusId').errors.required">
                                                   Transfer Status is required
                                                </span>
                                              </ng-container>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12 transfer-form-data">
                                                <ng-select
                                                    placeholder="Specialty"
                                                    formControlName="speciality_Code"
                                                    class="border-0 font-numbar lab-select"
                                                    (change)="getAttendingPhysician($event)">
                                                    <ng-option
                                                        *ngFor="let item of getSpecialitylist"
                                                        [value]="item.speciality_Code">{{item.speciality_desc}}
                                                    </ng-option>
                                                </ng-select>
                                                <label
                                                    class="position-absolute m-0 bg-white">Specialty</label>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12 transfer-form-data">
                                                <ng-select placeholder="Floor"
                                                    class="border-0 font-numbar lab-select"
                                                    formControlName="floorId"
                                                    (change)="getSelectgetRooms($event);">
                                                    <ng-option
                                                        *ngFor="let item of getFloorslist"
                                                        [value]="item.id">{{item.floornumber+"-"+item.floorName}}</ng-option>
                                                </ng-select>
                                                <label
                                                    class="position-absolute m-0 bg-white">Floor</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12 transfer-form-data">
                                                <ng-select placeholder="Room"
                                                    class="border-0 font-numbar lab-select"
                                                    formControlName="roomId"
                                                    (change)="getSelectgetBads($event)">
                                                    <ng-option
                                                        *ngFor="let item of getRoomslist"
                                                        [value]="item.id">{{item.roomNumber+"-"+item.roomName}}</ng-option>
                                                </ng-select>
                                                <label
                                                    class="position-absolute m-0 bg-white">Room</label>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12 transfer-form-data">
                                                <ng-select placeholder="Bed"
                                                    class="border-0 font-numbar lab-select"
                                                    formControlName="badId">
                                                    <ng-option
                                                        *ngFor="let item of getBadlist"
                                                        [value]="item.id">{{item.badNumber+"-"+item.badName}}</ng-option>
                                                </ng-select>
                                                <label
                                                    class="position-absolute m-0 bg-white">Bed</label>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12 transfer-form-data">
                                                <ng-select
                                                placeholder="Attending Doctor"
                                                class="border-0 font-numbar lab-select"
                                                formControlName="attendDoctor_code">
                                                <ng-option
                                                    *ngFor="let item of getPhysicianlist"
                                                    [value]="item.doctor_Code">{{item.doctor_Name}}
                                                </ng-option>
                                            </ng-select>
                                                <label
                                                    class="position-absolute m-0 bg-white">Attending
                                                    Physician</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-4">
                                            <div
                                                class="form-group-control m-0 px-0 position-relative col-12">
                                                <input type="text" name id
                                                    class="f-size-field form-control"
                                                    placeholder="Comment"
                                                    formControlName="comment" />
                                                <label
                                                    class="position-absolute m-0 bg-white">Comment</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    class="action-buttons d-flex align-items-center justify-content-center my-3">
                                    <div class="button-group mx-2">
                                        <button type="submit"
                                            class="d-flex align-items-center pl-border-radius-10 text-white p-2 px-3 text-nowrap default-btn" (click)="onSave()">Save</button>
                                    </div>
                                    <div class="button-group mx-2">
                                        <button
                                            class="d-flex align-items-center pl-border-radius-10 text-white p-2 px-3 text-nowrap cancel-btn" (click)="onCancel()">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</ng-template>
